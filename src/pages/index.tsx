import Head from 'next/head'
import styles from "@/styles/index.module.scss";
import React, {useEffect, useState} from "react";
import Filter from "@/components/Filter/Filter";
import Card from "@/components/Card/Card";

const Home = () => {

    const [data, setData] = useState<any>([])

    useEffect(() => {
        const fetchData = async () => {
            const response = await fetch("https://getlens-master.s.dev.family/api/pages/obektivy");
            const data = await response.json();
            const needData = data.products.pop();
            setData(data.products);

        }
        fetchData();
    }, [])


    return (
        <>
            <Head>
                <title>Test-app</title>
                <meta name="description" content="Generated by create next app"/>
                <meta name="viewport"
                      content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
                <link rel="icon" href="/favicon.ico"/>
                <link rel="preconnect" href="https://fonts.googleapis.com"/>
                <link rel="preconnect" href="https://fonts.gstatic.com"/>
                <link
                    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap"
                    rel="stylesheet"
                />
            </Head>
            <div className={styles.main}>
                <Filter count={data.length}/>
                <Card data={data}/>
            </div>
        </>
    )
}
export default Home;